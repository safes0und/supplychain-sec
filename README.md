# SupplyChain-Sec

Демонстрационное приложение для изучения практик безопасной цепочки поставок (Secure Supply Chain) в контексте разработки и развертывания контейнеризированных приложений.

## Описание

Проект представляет собой простое Flask-приложение, которое демонстрирует полный цикл безопасной разработки и развертывания с использованием современных инструментов и практик:

- **SAST** (Static Application Security Testing) через Semgrep
- **SBOM** (Software Bill of Materials) генерация и аттестация
- **Подписи образов** через Cosign (keyless OIDC)
- **SLSA Provenance** для отслеживания происхождения артефактов
- **in-toto** для верификации целостности цепочки поставок
- **Сканирование уязвимостей** через Trivy

## Технологии

- **Python 3.12** - язык программирования
- **Flask** - веб-фреймворк
- **Gunicorn** - WSGI HTTP сервер
- **Docker** - контейнеризация
- **GitHub Actions** - CI/CD pipeline

## Структура проекта

```
SupplyChain-Sec/
├── app.py                   # Основное Flask приложение
├── Dockerfile      з
├── requirements.txt         # Зависимости Python (с хешами)
└── .github/
    └── workflows/
        └── secure-supplychain.yml  # CI/CD pipeline
```

## CI/CD Pipeline

Workflow автоматически запускается при push в ветку `main` и выполняет следующие этапы:

### 1. Build & Attest
- Сканирование кода (Semgrep SAST)
- Сканирование зависимостей и конфигураций (Trivy)
- Генерация SBOM для зависимостей и образа
- Сборка Docker образа
- Запись метаданных in-toto для каждого этапа

### 2. Generate SLSA Provenance
- Генерация SLSA L3 provenance для собранного образа

### 3. Collect SLSA Provenance
- Скачивание и сохранение SLSA метаданных

### 4. Sign & Attest
- Подпись образа через Cosign (keyless OIDC)
- Аттестация SBOM, результатов сканирований
- Верификация всех этапов цепочки поставок

### 5. Deploy to Self-Hosted
- Деплой образа на self-hosted runner с Linux
- Автоматический перезапуск контейнера

## Безопасность

Проект демонстрирует следующие практики безопасности:

- ✅ **SAST сканирование** - автоматическое обнаружение уязвимостей в коде
- ✅ **SBOM генерация** - полный список зависимостей и их версий
- ✅ **Подписи образов** - криптографическая подпись Docker образов
- ✅ **SLSA Provenance** - отслеживание происхождения артефактов
- ✅ **in-toto верификация** - проверка целостности цепочки поставок
- ✅ **Сканирование уязвимостей** - проверка зависимостей на известные CVE
- ✅ **Зависимости с хешами** - защита от подмены пакетов

## Артефакты

Pipeline генерирует следующие артефакты:

- `security-artifacts` - результаты сканирований и SBOM
- `slsa-provenance` - SLSA метаданные
- `in-toto-metadata` - layout, link файлы и публичные ключи

Pipeline генерирует следующие артефакты:

